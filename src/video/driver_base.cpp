#include "video/driver_base.hpp"
#include "video/device_base.hpp"

namespace djah { namespace video {

	//-------------------------------------------------------------------------------------------------
	driver_base::driver_base(device_base *device)
		: device_(device)
		, view_matrix_(math::matrix4f::mat_identity)
		, projection_matrix_(math::matrix4f::mat_identity)
		, proj_dirty_(false)
	{
	}
	//-------------------------------------------------------------------------------------------------


	//-------------------------------------------------------------------------------------------------
	driver_base::~driver_base()
	{
	}
	//-------------------------------------------------------------------------------------------------


	//-------------------------------------------------------------------------------------------------
	void driver_base::setViewport(const geometry::rect_i &viewport)
	{
		viewport_ = viewport;
		updateViewport();
	}
	//-------------------------------------------------------------------------------------------------


	//-------------------------------------------------------------------------------------------------
	const geometry::rect_i& driver_base::getViewport() const
	{
		return viewport_;
	}
	//-------------------------------------------------------------------------------------------------


	//-------------------------------------------------------------------------------------------------
	const math::matrix4f& driver_base::getViewMatrix() const
	{
		return view_matrix_;
	}
	//-------------------------------------------------------------------------------------------------

	//-------------------------------------------------------------------------------------------------
	void driver_base::setViewMatrix(const math::matrix4f &view_mat)
	{
		view_matrix_ = view_mat;
	}
	//-------------------------------------------------------------------------------------------------

	//-------------------------------------------------------------------------------------------------
	const math::matrix4f& driver_base::getProjectionMatrix() const
	{
		return projection_matrix_;
	}
	//-------------------------------------------------------------------------------------------------

	//-------------------------------------------------------------------------------------------------
	void driver_base::setProjectionMatrix(const math::matrix4f &proj_mat)
	{
		projection_matrix_ = proj_mat;
		proj_dirty_ = true;
	}
	//-------------------------------------------------------------------------------------------------

} /*video*/ } /*djah*/