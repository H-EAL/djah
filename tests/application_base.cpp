#include "application_base.hpp"

#include <djah/video/device_base.hpp>
#include <djah/video/driver_base.hpp>

namespace djah { namespace tests {

	//----------------------------------------------------------------------------------------------
	application_base::application_base(const video::video_config &config)
		: device_(0)
		, driver_(0)
	{
		device_ = video::create_device(config);
		driver_ = device_->videoDriver();
	}
	//----------------------------------------------------------------------------------------------

	//----------------------------------------------------------------------------------------------
	application_base::~application_base()
	{
		device_->destroy();
		delete device_;
	}
	//----------------------------------------------------------------------------------------------
	
	//----------------------------------------------------------------------------------------------
	void application_base::exec()
	{
		if( device_ && driver_ )
		{
			init();
			while( device_->run() )
				run();
			exit();
		}
	}
	//----------------------------------------------------------------------------------------------
	
	//----------------------------------------------------------------------------------------------
	void application_base::init()
	{
	}
	//----------------------------------------------------------------------------------------------
	
	//----------------------------------------------------------------------------------------------
	void application_base::run()
	{
	}
	//----------------------------------------------------------------------------------------------
	
	//----------------------------------------------------------------------------------------------
	void application_base::exit()
	{
	}
	//----------------------------------------------------------------------------------------------

} /*tests*/ } /*djah*/